{% load i18n %}
{% load staticfiles %}

<!-- Preloader for load detail -->
<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center" ng-if="!itemDetailLoad">
    <h2>{% trans "Loading detail..." %}</h2>
</div>
<!-- Error messages -->
<div class="item-in-cart row">
    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-4 text-center">
        <span ng-if="itemDetailLoadError">[[ itemDetailLoadError ]]</span>
        <span ng-if="rateError">{% trans "Please,Sign In or Sign Up" %}</span>
    </div>
</div>

<div class="wrapperOnList col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-if="itemDetailLoad">
    <div class="row">

        <h1 class="item-detail-name">[[ itemDetail.name ]]</h1>

        <!-- breadcrumb -->
        <ol class="breadcrumb">
            <li><a href="{% url 'home' %}">{% trans "Home" %}</a></li>
            <li><a href="{% url 'products_list_ang' %}"
                   ng-click="showDetailOfItem=false">{% trans "List of items" %}</a></li>
            <li ng-show="showDetailOfItem" class="active">{% trans "Detail of item" %}</li>
        </ol>
        <hr>

        <!-- Tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active">
                <a ng-href="#/[[ itemDetail.id ]]" data-target="#/[[ itemDetail.id ]]">{% trans "About item" %}</a>
            </li>
            <li role="presentation">
                <a ng-href="#/[[ itemDetail.id ]]/comments" data-target="#/[[ itemDetail.id ]]/comments">{% trans "Comments" %}</a>
            </li>
        </ul>

        <div class="col-lg-10 col-md-9 col-sm-9 col-xs-6">
            <h3 class="detail-item-attr">
               <small>
                   {% trans "ID:" %}[[ itemDetail.id ]]
               </small>
            </h3>
        </div>

        <!-- Button dropdown -->
        <div class="col-lg-2 col-md-3 col-sm-3 col-xs-6 text-right" ng-if="isAuthUserIsOwner()">
            <div class="btn-group">
                <a class="btn btn-primary" ng-href="#/[[ itemDetail.id ]]/edit">
                    {% trans "Edit" %}
                </a>
                <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="javascript:void(0);">
                    <span class="fa fa-caret-down"></span></a>
                <ul class="dropdown-menu">
                    <li><a ng-href="#/[[ itemDetail.id ]]/edit"> {% trans "Edit" %}</a></li>
                    <li><a ng-href="#/[[ itemDetail.id ]]/action/add"> {% trans "Add/edit action" %}</a></li>
                    <li><a href="javascript:;" class="alert-danger" ng-click="deleteItem()">{% trans "Delete" %}</a></li>
                    <li class="divider"></li>
                    <li><a href="{% url 'products_add' %}">
                        <i class="i"></i> {% trans "Add item" %}</a>
                    </li>
                </ul>
            </div>
        </div>

    </div>

    <div class="col-lg-6 col-md-6 col-sm-4 col-xs-12 text-center animated fadeInLeft">
        <img src="[[ itemDetail.image_url ]]"
             class="img-rounded img-responsive" alt="Avatar">
    </div>

    <!-- Price and action price -->
    <div class="col-lg-6 col-md-6 col-sm-8 col-xs-12 animated fadeInRight">

        <h3>{% trans "Price:" %}
            <span ng-class="{'oldprice' : itemDetail.action_price}">
                [[ itemDetail.price | currency:"₴" ]]
            </span>

                <!-- show new price if it defined in action -->
            <span class="newprice animated infinite pulse" ng-if="itemDetail.action_price">
                [[ itemDetail.action_price| currency:"₴"  ]]
            </span>
        </h3>

        <!-- Rating block-->
            <h4 ng-hide="greet">{% trans "Average rating:" %}
                <rating ng-model="rate.value" max="max" readonly="isReadonly" on-hover="hoveringOver(value)"
                        on-leave="overStar = null" titles="['one','two','three']" ng-click="isReadonly=true;addRate();">

                </rating>
            </h4>
            <h4 class="rate-success-text" ng-if="greet">{% trans "Thanks for rate" %}</h4>

            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-if="isReadonly">
                <progressbar max="maxx" value="dynamic" class="col-lg-3 col-md-4 col-sm-5 col-xs-6">
                    <span class="progressbar-text">[[dynamic]] / [[maxx]]</span>
                </progressbar>
            </div>

        <!-- Description -->
        <div class="item-detail-description col-lg-12 col-md-12 col-sm-12 col-xs-12 hidden-sm">
            <pre>[[ itemDetail.description ]]</pre>
        </div>

        <!-- Categories -->
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <h3 ng-show="itemDetail.categories.length">{% trans "Categories:" %} </h3>
        <ul>
            <li ng-repeat="category in itemDetail.categories">
                [[ category ]]
            </li>
        </ul>
    </div>

    </div>

    <!-- Description for sm-display-->
    <div class="item-detail-description col-sm-12 hidden-lg hidden-md hidden-xs">
        <pre>[[ itemDetail.description ]]</pre>
    </div>


    <hr>

</div>