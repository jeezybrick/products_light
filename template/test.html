{% extends 'layout.html' %}
{% load i18n %}
{% load staticfiles %}
{% block title %}
    Home
{% endblock %}

{% block content %}

    <div class="wrapper" ng-controller="TestController">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                <!-- Accordion for form -->
                <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                    <div class="panel panel-default">
                        <div class="panel-heading" role="tab" id="headingOne">
                            <h4 class="panel-title">
                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne"
                                   aria-expanded="false" aria-controls="collapseOne">
                                    Upload files/images
                                </a>
                            </h4>
                        </div>
                        <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel"
                             aria-labelledby="headingOne">
                            <div class="panel-body">

                                <!-- Form -->
                                <form name="myForm">
                                    <fieldset>
                                        <legend>Upload on form submit</legend>
                                        Username:
                                        <input type="text" name="userName" ng-model="username" size="31" required>
                                        <i ng-show="myForm.userName.$error.required">*required</i>
                                        <br>Photo:
                                        <input type="file" ngf-select ng-model="picFile" name="file"
                                               accept="image/*" ngf-max-size="2MB" required>
                                        <i ng-show="myForm.file.$error.required">*required</i><br>
                                        <i ng-show="myForm.file.$error.maxSize">File too large
                                            [[ picFile.size / 1000000|number:1]]MB: max 2M</i>
                                        <img ng-show="myForm.file.$valid" ngf-thumbnail="picFile" class="thumb">
                                        <button ng-click="picFile = null" ng-show="picFile">Remove</button>
                                        <br>
                                        <button ng-disabled="!myForm.$valid"
                                                ng-click="uploadPic(picFile)">Submit
                                        </button>
                                          <span class="progress" ng-show="picFile.progress >= 0">
                                            <div style="width:[[ picFile.progress ]]%"
                                                 ng-bind="picFile.progress + '%'"></div>
                                          </span>
                                        <span ng-show="picFile.result">Upload Successful</span>
                                        <span class="err" ng-show="errorMsg">[[ errorMsg ]]</span>
                                    </fieldset>
                                    <br>
                                </form>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>

{% endblock %}